(this["webpackJsonpgoit-react-hw-08"]=this["webpackJsonpgoit-react-hw-08"]||[]).push([[0],{12:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var r=n(16),a=n.n(r),c=n(24),u=n(15),o=n.n(u),s=n(3);o.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""},b={register:function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(s.a.registerRequest()),t.prev=1,t.next=4,o.a.post("/users/signup",e);case 4:r=t.sent,c=r.data,n(s.a.registerSuccess(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(s.a.registerError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(s.a.logoutRequest()),e.prev=1,e.next=4,o.a.post("/users/logout");case 4:n=e.sent,r=n.data,l(),t(s.a.logoutSuccess(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(s.a.logoutError(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(s.a.loginRequest()),t.prev=1,t.next=4,o.a.post("/users/login",e);case 4:r=t.sent,c=r.data,i(c.token),n(s.a.loginSuccess(c)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n(s.a.loginError(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(e,t){var n=t().auth.token;n&&(i(n),e(s.a.getCurrentUserRequest()),o.a.get("/users/current").then((function(t){var n=t.data;return e(s.a.getCurrentUserSuccess(n))})).catch((function(e){return s.a.getCurrentUserError(e)})))}}},f={isAuthenticated:function(e){return e.auth.token},getUserName:function(e){return e.auth.user.name}};n(23)},19:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return b})),n.d(t,"h",(function(){return f})),n.d(t,"d",(function(){return g}));var r=n(1),a=Object(r.b)("contacts/addRequest"),c=Object(r.b)("contacts/addSuccess"),u=Object(r.b)("contacts/addError"),o=Object(r.b)("contacts/fetchRequest"),s=Object(r.b)("contacts/fetchSuccess"),i=Object(r.b)("contacts/fetchError"),l=Object(r.b)("contacts/removeRequest"),b=Object(r.b)("contacts/removeSuccess"),f=Object(r.b)("contacts/removeError"),g=Object(r.b)("phonebook/filter")},23:function(e,t,n){"use strict";var r,a,c,u=n(6),o=n(5),s=n(1),i=n(3),l={name:null,email:null},b=Object(s.c)(l,(r={},Object(u.a)(r,i.a.registerSuccess,(function(e,t){return t.payload.user})),Object(u.a)(r,i.a.loginSuccess,(function(e,t){return t.payload.user})),Object(u.a)(r,i.a.getCurrentUserSuccess,(function(e,t){return t.payload})),Object(u.a)(r,i.a.logoutSuccess,(function(){return l})),r)),f=Object(s.c)(null,(a={},Object(u.a)(a,i.a.registerSuccess,(function(e,t){return t.payload.token})),Object(u.a)(a,i.a.loginSuccess,(function(e,t){return t.payload.token})),Object(u.a)(a,i.a.logoutSuccess,(function(){return null})),a)),g=Object(s.c)(null,(c={},Object(u.a)(c,i.a.registerError,(function(e,t){return t.payload})),Object(u.a)(c,i.a.loginError,(function(e,t){return t.payload})),Object(u.a)(c,i.a.logoutError,(function(e,t){return t.payload})),Object(u.a)(c,i.a.getCurrentUserError,(function(e,t){return t.payload})),c));t.a=Object(o.c)({user:b,token:f,error:g})},3:function(e,t,n){"use strict";var r=n(1),a=Object(r.b)("auth/registerRequest"),c=Object(r.b)("auth/registerSuccess"),u=Object(r.b)("auth/registerError"),o=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),l=Object(r.b)("auth/logoutRequest"),b=Object(r.b)("auth/logoutSuccess"),f=Object(r.b)("auth/logoutError"),g=Object(r.b)("auth/getCurrentUserRequest"),p=Object(r.b)("auth/getCurrentUserSuccess"),d=Object(r.b)("auth/getCurrentUserError");t.a={registerRequest:a,registerSuccess:c,registerError:u,logoutRequest:l,logoutSuccess:b,logoutError:f,loginRequest:o,loginSuccess:s,loginError:i,getCurrentUserRequest:g,getCurrentUserSuccess:p,getCurrentUserError:d}},50:function(e,t,n){e.exports=n(81)},80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),u=n.n(c),o=n(10),s=n(47),i=n(32),l=n(33),b=n(35),f=n(34),g=n(18),p=n(4),d=[{path:"/",label:"Home",exact:!0,component:Object(r.lazy)((function(){return n.e(6).then(n.bind(null,83))})),private:!1,restricted:!1},{path:"/register",label:"Register",exact:!0,component:Object(r.lazy)((function(){return n.e(5).then(n.bind(null,84))})),private:!1,restricted:!0},{path:"/login",label:"Login",exact:!0,component:Object(r.lazy)((function(){return n.e(4).then(n.bind(null,85))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(r.lazy)((function(){return n.e(3).then(n.bind(null,86))})),private:!0,restricted:!1}],h=function(){return a.a.createElement("nav",null,d.map((function(e){return a.a.createElement(g.b,{exact:e.exact,key:e.label,to:e.path,className:"nav",activeClassName:"active-nav"},e.label)})))},j=n(12),m={container:{display:"flex",alignItems:"center"},img:{marginRight:"10px"}},O=Object(o.b)((function(e){return{name:j.b.getUserName(e),avatar:"https://cdn.pixabay.com/photo/2014/04/02/14/10/female-306407_960_720.png"}}),{onLogout:j.a.logOut})((function(e){var t=e.avatar,n=e.name,r=e.onLogout;return a.a.createElement("div",{style:m.container},a.a.createElement("img",{style:m.img,src:t,alt:"",width:"32"}),a.a.createElement("span",null," Welcome, ",n),a.a.createElement("button",{type:"button",onClick:r},"Logout"))})),v={header:{display:"flex",justifyContent:"space-between",alignItems:"center"}},E=Object(o.b)((function(e){return{isAuthenticated:j.b.isAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return a.a.createElement("header",{style:v.header},a.a.createElement(h,null),t&&a.a.createElement(O,null))}));var y,k=function(e){var t=e.children;return a.a.createElement("section",null,a.a.createElement(E,null),a.a.createElement("hr",null),t)},S=n(25),x=Object(o.b)((function(e){return{isAuthenticated:j.b.isAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=Object(S.a)(e,["component","isAuthenticated"]);return a.a.createElement(p.b,Object.assign({},r,{render:function(e){return n&&r.restricted?a.a.createElement(p.a,{to:"/contacts"}):a.a.createElement(t,e)}}))})),C=Object(o.b)((function(e){return{isAuthenticated:j.b.isAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=Object(S.a)(e,["component","isAuthenticated"]);return a.a.createElement(p.b,Object.assign({},r,{render:function(e){return n?a.a.createElement(t,e):a.a.createElement(p.a,{to:"/login"})}}))})),R=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return a.a.createElement(g.a,null,a.a.createElement(k,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement("h1",null,"Loading...")},a.a.createElement(p.d,null,d.map((function(e){return e.private?a.a.createElement(C,Object.assign({key:e.label},e)):a.a.createElement(x,Object.assign({key:e.label},e))}))))))}}]),n}(r.Component),U=Object(o.b)(null,{onGetCurrentUser:j.a.getCurrentUser})(R),q=n(1),A=n(31),w=n(48),z=n.n(w),L=n(6),I=n(49),N=n(5),B=n(19),G=Object(q.c)([],(y={},Object(L.a)(y,B.g,(function(e,t){return t.payload})),Object(L.a)(y,B.c,(function(e,t){var n=t.payload;return[].concat(Object(I.a)(e),[n])})),Object(L.a)(y,B.j,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),y)),J=Object(q.c)("",Object(L.a)({},B.d,(function(e,t){return t.payload}))),_=Object(N.c)({items:G,filter:J}),D=n(23),H={key:"auth",storage:z.a,whitelist:["token"]},M=Object(q.a)({reducer:{contacts:_,auth:Object(A.a)(H,D.a)}}),W=Object(A.b)(M);n(80);u.a.render(a.a.createElement(o.a,{store:M},a.a.createElement(s.a,{loading:null,persistor:W},a.a.createElement(U,null))),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.d51d1f10.chunk.js.map